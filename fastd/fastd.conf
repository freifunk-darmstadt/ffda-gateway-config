log level info;

# Log everything to a log file
log to "/var/log/fastd-mesh-vpn.log" level debug;

# Set the interface name
interface "vpn_ffda";

# Support xsalsa20 and aes128 encryption methods, prefer xsalsa20
method "salsa2012+gmac";

# Bind to a fixed port, IPv4 only
bind 0.0.0.0:3332;

# Secret key generated by `fastd --generate-key`
secret "185468bfa55c2d65c4e95c7b01a9fb6bc33d8db45f0ec6a5b0648ccae74fd147";

# Set the interface MTU for TAP mode with xsalsa20/aes128 over IPv4 with a base MTU of 1492 (PPPoE)
# (see MTU selection documentation)
mtu 1426;

# Include peers from the directory 'peers'
include peers from "peers";

secure handshakes yes;


# adjust upstream/downstream speed and choose mac address
# https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/5/html/Virtualization/sect-Virtualization-Tips_and_tricks-Generating_a_new_unique_MAC_address.html

# TODO: in script

on up "ip link set address <choose fixed mac address for if> dev $INTERFACE && ip link set up dev $INTERFACE && batctl -m bat0 if add $INTERFACE && ifup freifunk && batctl gw_mode server  100mbit/100mbit";

on down "ifdown freifunk";

